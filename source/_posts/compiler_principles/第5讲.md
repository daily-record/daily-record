## 5.1 词法规则形式化-正规集与正规式

 

#### 正规式和正规集

**程序语言定义的合法单词集合都是正规集**

- `正规集`可以用``正规式``表示
- `正规式`是表示`正规集`的一种办法
- 一个字集合是`正规集`当且仅当它能用`正规式`表示



#### 正规式和正规集的递归定义

对于给定的字母表Σ：

1. `ε` (空字)和 `∅`(空集) 都是 Σ上的正规式，它们所表示的正规集为 `{ε}` 和 `∅`;

2. 任何 `a∈Σ` ，`a` 是 `Σ` 上的正规式，它所表示的正规集为 `{a}`;

3. 假定 e~1~和 e~2~都是 `Σ` 上的正规式，它们所表示的正规集为L(e~1~) 和L(e~2~)，则
   
    - (e~1~|e~2~ )为正规式，它所表示的正规集为 L(e~1~) ∪L(e~2~)
    - (e~1~·e~2~ )为正规式，它所表示的正规集为 L(e~1~)L(e~2~) (字的集合进行连接运算)
    - (e~1~)*为正规式，它所表示的正规集为 (L(e~1~)) *
    
    仅由有限次使用上述三步骤而定义的表达式才是 `Σ` 上的正规式，仅由这些正规式表示的字集才是 `Σ` 上的正规集
    
    

**`ε` 是字、正规式**

**`∅`是集合、正规式**

**`a (a ∈Σ)` 是字符、字（一个字符a构成的长度为1的字符串）、正规式**



#### 正规式的等价性

> 若两个正规式所表示的正规集相同，则称这两个正规式等价

![image-20200306222625771](第5讲.assets\image-20200306222625771.png)



#### 正规式的性质

对正规式，下列等价成立：

- e~1~|e~2~ = e~2~|e~1~ 交换律
- e~1~ |(e~2~|e~3~) = (e~1~|e~2~)|e~3~ 结合律
- e~1~(e~2~e~3~) = (e~1~e~2~)e~3~ 结合律
- e~1~(e~2~|e~3~) = e~1~e~2~|e~1~e~3~ 分配律
- (e~2~|e~3~)e~1~ = e~2~e~1~|e~3~ e~1~ 分配律
- eε = εe = e    e~1~e~2~ <> e~2~ e~1~(e~1~连接e~2~不等于(e~2~连接e~1~)

**利用正规式的等价性可证明上述性质**



![image-20200306225813915](第5讲.assets\image-20200306225813915.png)



**`letter(letter|digit)*`对应用户自定义标识符**

**同一类字符使用同一正规式表示**



## 5.2 确定有限自动机

> 对状态图进行形式化，给出数学定义

`确定有限自动机(Deterministic Finite Automata， DFA)` M是一个五元式 M=(S, Σ, f, S~0~, F)，其中：

- S: 有穷`状态集`
- Σ：输入`字母表`(有穷)
- f: `状态转换函数`，为S×Σ→S的单值部分映射，f(s， a)=s’表示：当现行状态为s，输入字符为a时，将状态转换到下一状态s’，s’称为s的一个后继状态
- S~0~ ∈S是唯一的一个`初态`
- F⊆S ：`终态集`(可空)

![image-20200307133849646](第5讲.assets\image-20200307133849646.png)



#### DFA表示为状态转换图

- 假定DFA M含有 `m个状态` 和 `n个输入字符`
- 对应的状态转换图含有m个状态结点，每个结点最多含有n条箭弧射出，且每条箭弧用Σ上的不同的输入字符来作标记



- 对于 Σ*中的任何字 α，若存在一条从初态到某一终态的道路，且这条路上所有弧上的标记符连接成的字等于 α，则称α为DFA M所识别 (接收 )
- DFA M所识别的字的全体记为L(M)

![image-20200307135451228](第5讲.assets\image-20200307135451228.png)





## 5.3 非确定有限自动机

`非确定有限自动机 (Nondeterministic Finite Automata，NFA)` M是一个五元式 M=(S, Σ, f, S~0~, F)，其中：

- S: 有穷`状态集`
- Σ：输入`字母表`(有穷)
- f: `状态转换函数`，为 S×Σ\*（Σ*指Σ上的字） → 2^S^(S状态集的幂集，也就是有S的所有子集构成的集合)的部分映射，f(s,a)=s'（a指一个字而不是字符，s'则为一个状态集合中的某一个状态（可能的状态有多个，也可能是空集））
- S~0~ ⊆S是非空的`初态集`
- F⊆S ：`终态集`(可空) 



#### NFA与DFA的区别

- NFA可以有`多个初态`
- 弧上的标记可以是 Σ*中的一个字 (甚至可以是一个`正规式` )，而不一定是单个字符
- `同一个字`可能出现在同状态射出的多条弧上

**DFA是NFA的特例**



#### NFA的性质

- 对于 Σ*中的任何字 α，若存在一条从初态到某一终态的道路，且这条路上所有弧上的标记字连接成的字等于 α (忽略那些标记为 ε的弧 )，则称 α 为NFA M所识别 (接收 )
- NFA M所识别的字的全体记为L(M)

![image-20200307151706864](第5讲.assets\image-20200307151706864.png)

**NFA更直观，更容易表达设计者的思想**



#### DFA和NFA

- 定义：对于任何两个有限自动机M和M’，如果 L(M)=L(M’)，则称M与M’等价
- 自动机理论中一个重要的结论：`判定两个自动机等价性的算法是存在的`
- 对于每个NFA M存在一个DFA M’，使得 L(M)=L(M’)

**DFA与NFA识别能力相同!**

