## 第1讲

#### main content

1. 什么是编译程序？

2. 编译程序的各个阶段，理解各个阶段的任务，各个阶段所依循的规则。

    ![image-20200229170429773](第1讲.assets\image-20200229170429773.png)

3. 会画编译程序的总框



#### solution

1. 把某一种高级语言程序等价地转换成另一种低级语言程序（如汇编或机器语言程序）的程序

2. 

3. 

 

## 1.1 什么是编译程序



#### 翻译程序

> 把某一种语言程序(称为源语言程序)等价地转换成另一种语言程序(称为目标语言程序)的程序

![image-20200229113252306](第1讲.assets\image-20200229113252306.png)



#### 编译程序

> 把某一种高级语言程序等价地转换成另一种低级语言程序(如汇编语言或机器语言程序)的程序



![image-20200229113408377](第1讲.assets\image-20200229113408377.png)

**运行编译程序的称为宿主机，运行目标语言程序的称为目标机**

##### 分类

- 诊断编译程序(Diagnostic Compiler)：帮助开发人员开发、调试和排错，主要在发现程序的错误
- 优化编译程序(Optimizing Compiler)：侧重于提高目标代码的实行效率，能够生成高校的目标代码
- 交叉编译程序(Cross Compiler)：产生不同于宿主机的机器代码
- 可变目标编译程序(Retargetable Compiler)：不需要重写编译程序中与机器无关的部分，只要改变和目标机器有关的部分



#### 解释程序

> 把源语言写的源程序作为输入，但不产生目标 程序，而是边解释边执行源程序

![image-20200229114354757](第1讲.assets\image-20200229114354757.png)





## 1.2 为什么要学习编译原理



#### 计算思维

> 计算思维是运用计算机科学的基础概念去求解问题、 设计系统和理解人类的行为，它包括了一系列广泛的计算机科学的思维方法



- 抽象
- 自动化
- 问题分解
- 递归
- 权衡
- 保护，冗余，容错，纠错和恢复
- 利用启发式推理寻求答案



##### 抽象

1. 忽略一个主题中与当前问题(或目标)无关的那些方面， 以便更充分地注意与当前问题(或目标)有关的方面
2. 从众多的事物中抽取出共同的、本质性的特征，舍 弃其非本质的特征



##### 自动化

> 将抽象思维的结果在计算机上实现，是一个将计算思维成果物化的过程，也是将理论成果应用于技术的实践



- 有限自动机
- 预测分析程序
- 算符优先分析
- LR分析



##### 分解

> 将大规模的复杂问题分解成若 干个较小规模的、更简单的问题加以解决

![image-20200229155051400](第1讲.assets\image-20200229155051400.png)



编译原理中的问题分解：

1. 引入中间语言，复杂度与抽象程度介于高级语言程序与膜表语言程序之间，使得一个很难的转换问题分解成两个相对简单的转换问题
2. 把编译的过程做进一步分解，细分成词法分析，语法分析，语义分析，中间代码生成，优化目标代码生成等多个阶段
3. 有时候把复杂处理分解成对程序的多次扫描或遍历，每一次遍历都处理一个小问题



##### 递归

> 问题的解决依赖于类似问题的解决，只不过后者的 复杂程度或规模较原来的问题更小
>
> 一旦将问题的复杂程度和规模化简到足够小时，问 题的解法其实非常简单



编译原理中的递归：

1. 递归下降分析
2. 基于树的遍历属性计算
3. 语法制导翻译



##### 权衡

> 理论研究重在探寻问题求解的方法，对于理论成果的研究运用又需要在能力和运用中作出权衡



编译原理中的权衡：

1. 用上下文无关文法来描述和处理高级程序设计语言
2. 优化措施的选择



#### 应用

- HTML/XML分析
- 语言处理工具
- 搜索引擎

应用了语言翻译变换的计算机技术：

- 用户接口：Shell命令解释器
- 查询语言：SQL，XQuery
- 网络协议：HTTP， SOAP



## 1.3 编译过程

![image-20200229170342770](第1讲.assets\image-20200229170342770.png)



#### 词法分析

> 任务: 输入源程序，对构成源程序的字符串进行 扫描和分解，识别出单词符号
>
> 依循的原则：构词规则
>
> 描述工具：有限自动机

```txt
for		i		:=		1		  to	 100	  do
基本字	标识符   赋值号	整常数		基本字	  整常数	基本字
```



#### 语法分析

> 任务：在词法分析的基础上，根据语法规则把 单词符号串分解成各类语法单位 (语法范畴 )
>
> 依循的原则：语法规则
>
> 描述工具：上下文无关文法

![image-20200229171637192](第1讲.assets\image-20200229171637192.png)



#### 中间代码产生

> 任务：对各类语法单位按语言的语义进行初步翻译 
>
> 依循的原则：语义规则
>
> 描述工具：属性文法
>
> 中间代码：三元式，四元式，树，... 

Z:=X + 0.618 * Y 翻译成四元式为:

![image-20200229171829152](第1讲.assets\image-20200229171829152.png)



#### 优化

> 任务：对前阶段产生的中间代码进行加工变换， 以期在最后阶段产生更高效的目标代码
>
> 依循的原则：程序的等价变换规则



#### 目标代码产生

> 任务: 把中间代码变换成特定机器上的目标代码 
>
> 依赖于硬件系统结构和机器指令的含义

目标代码三种形式：

- 汇编指令代码：需要进行汇编
- 绝对指令代码：可直接运行
- 可重定位指令代码：需要链接



## 1.4 编译程序的结构



#### 编译程序总框

![image-20200229183106660](第1讲.assets\image-20200229183106660.png)



- 符号表管理：完成编译过程中各种对象的信息的存储，组织和修改，为各阶段的分析和转换提供依据，存储信息
- 出错处理程序：发现源程序中的错误，把有关错误信息报告给用户，**甚至给出纠错建议**
    - 语法错误
        - 源程序中不符合语法（或词法）规则的错误
        - 非法字符、括号不匹配、缺少等
    - 语义错误
        - 源程序中不符合语义规则的错误
        - 说明错误、作用域错误、类型不一致等



#### 遍(pass)

> 所谓"遍"， 就是对源程序或源程序的中间表示从头到尾扫描一次

**阶段与遍是不同的概念**：

- 一遍可以由若干段组成
- 一个阶段也可以分若干遍来完成



#### 编译前端与后端

前端：

> 与源语言有关，如词法分析，语法分析，语义分析与中间代码产生，与机器无关的优化

后端：

> 与目标机有关，与目标机有关的优化，目标代码产生



## 1.5 编译程序生成

![image-20200229203247891](第1讲.assets\image-20200229203247891.png)



#### 编译程序的移植

![image-20200229210817947](第1讲.assets\image-20200229210817947.png)



#### 编译程序自动产生

> 编译程序-编译程序，编译程序产生器，编译程序书写系统

- LEX：词法分析程序产生器
- YACC：语法分析程序产生器

![image-20200229211018928](第1讲.assets\image-20200229211018928.png)







